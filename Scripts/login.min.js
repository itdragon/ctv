function ValidateInputType(){var n=document.getElementById("txtusername");isNaN(n.value.trim())?ValidateEmailInputValue(n.value.trim()):ValidatePhoneInputValue(n.value.trim())}function ValidateLogin(){ValidateInputType();var n=$("#frmLogin"),t=GetAllFormData(n);FLAG_LOGIN_SITE&&(FLAG_LOGIN_SITE=!1,POSTAjax("/cong-tac-vien/aj/Common/Login",t,function(){$("#submit-login").hide();$(".hloading").show()},function(n){if(n!=""&&n!=undefined&&n!=null){if(n.indexOf("@")!=-1){var t=n.toString().substr(0,n.indexOf("@")),i=n.toString().substr(n.indexOf("@")+1);if(t==1)return location.href=i,!1;if(t==-1)return $("#frmLogin .error").text("Nhập email hoặc số điện thoại"),$("#txtusername").focus(),!1;if(t==-2)return $("#frmLogin .error").text("Vui lòng nhập mật khẩu"),$("#txtpassword").focus(),!1;if(t==0)return $("#frmLogin .error").text("Thông tin đăng nhập không chính xác"),!1}}else return $("#frmLogin .error").text("Thông tin đăng nhập không chính xác"),!1},ErrorAjax,!0),FLAG_LOGIN_SITE=!0);$("#submit-login").show();$(".hloading").hide()}function ValidateUserName(){var n=document.getElementById("txtname");if(n.value.trim()=="")return $("#frmRegister .error").text("Bạn chưa nhập họ tên."),n.focus(),!1;if(n.value.trim().length<5)return $("#frmRegister .error").text("Họ tên quá ngắn, tối thiểu 5 ký tự"),n.focus(),!1;if(n.value.trim().length>50)return $("#frmRegister .error").text("Họ tên quá dài."),n.focus(),!1;$("#frmRegister .error").text("")}function ValidatePhoneUserRegist(){var n=document.getElementById("txtemail"),t;if(n.value.trim()=="")return $("#frmRegister .error").text("Vui lòng nhập Email hoặc số điện thoại"),$("#txtemail").focus(),!1;if(n.value.trim().length>30)return $("#frmRegister .error").text("Số điện thoại không hợp lệ"),username.focus(),!1;if(t=/^(((09)[0-9][2-9][0-9]{6})|((012)[0-9][2-9][0-9]{6})|((016)[2-9]{2}[0-9]{6}))$/,!t.test(n.value))return $("#frmRegister .error").text("Số điện thoại không hợp lệ"),$("#txtemail").focus(),!1;CheckWithPhone(n.value,"frmRegister")}function ValidateEmailUserRegist(){var n=document.getElementById("txtemail");if(n.value.trim()=="")return $("#frmRegister .error").text("Vui lòng nhập Email hoặc số điện thoại"),$("#txtemail").focus(),!1;if(n.value.trim().length>30)return $("#frmRegister .error").text("Email quá dài."),username.focus(),!1;if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,!regem.test(n.value))return $("#frmRegister .error").text("Email không đúng định dạng"),$("#txtemail").focus(),!1;CheckWithEmail(n.value,"frmRegister")}function ValidatePasswordUserRegist(){var n=document.getElementById("txtpass");if(n.value.trim()=="")return $("#frmRegister .error").text("Vui lòng nhập mật khẩu"),$("#txtpass").focus(),!1;if(n.value.indexOf(" ")>=0)return $("#frmRegister .error").text("Mật khẩu không được chứa khoảng trắng"),$("#txtpass").focus(),!1;if(n.value.length<6||n.value.length>20)return $("#frmRegister .error").text("Mật khẩu phải có độ dài 6-20 ký tự"),$("#txtpass").focus(),!1;$("#frmRegister .error").text("")}function ValidateInputForRegister(){var n=document.getElementById("txtemail");isNaN(n.value.trim())?ValidateEmailUserRegist():ValidatePhoneUserRegist()}function ValidatePasswordLogin(){var n=document.getElementById("txtpassword");if(n.value.trim()=="")return $("#frmLogin .error").text("Vui lòng nhập mật khẩu"),$("#txtpassword").focus(),!1;if(n.value.indexOf(" ")>=0)return $("#frmLogin .error").text("Mật khẩu không được chứa khoảng trắng"),$("#txtpassword").focus(),!1;if(n.value.length<6||n.value.length>20)return $("#frmLogin .error").text("Mật khẩu phải có độ dài 6-20 ký tự"),$("#txtpassword").focus(),!1;$("#frmLogin .error").text("")}function SubmitFormRegist(){var n=document.getElementById("txtpass"),t,i;if(n.value.trim()=="")return $("#frmRegister .error").text("Vui lòng nhập mật khẩu"),$("#txtpass").focus(),!1;if(n.value.indexOf(" ")>=0)return $("#frmRegister .error").text("Mật khẩu không được chứa khoảng trắng"),$("#txtpass").focus(),!1;if(n.value.length<6||n.value.length>20)return $("#frmRegister .error").text("Mật khẩu phải có độ dài 6-20 ký tự"),$("#txtpass").focus(),!1;$("#frmRegister .error").text("");t=$("#frmRegister");i=GetAllFormData(t);FLAG_SUBMIT_REGIST&&(FLAG_SUBMIT_REGIST=!1,POSTAjax("/aj/Common/SubmitRegisterInformation",i,function(){$("#submit-register").hide();$(".hloading").show()},function(n){if(FLAG_SUBMIT_REGIST=!0,n!=""&&n!=undefined&&n!=null)if(n=="-3")$("#frmRegister .error").text("Vui lòng nhập họ tên của bạn"),$("#txtname").focus();else if(n=="-2")$("#frmRegister .error").text("Vui lòng nhập mật khẩu"),$("#txtpassword").focus();else if(n=="0")$("#frmRegister .error").text("Lỗi đăng ký thông tin thành viên, vui lòng thử lại sau.");else{alert("Bạn đã đăng ký tài khoản thành công!");var i="",t=n;i=t!=""&&t!=undefined?t.indexOf("http://")>-1?t:"http://"+t:"/";window.location=i}},ErrorAjax,!0));$("#submit-register").show();$(".hloading").hide()}function submitRegisterForm(){var t=$("#txtemail").val(),n=$("#frmRegister");n.ajaxSubmit({beforeSubmit:function(){$("#hloading").css("display","block")},success:function(n){n==1?($("#hloading").css("display","none"),$("#divcaptcha").css("display","none"),$("#confirmcapcha").css("display","none"),$("#frmRegister .error").html("Vui lòng kiểm tra email để hoàn tất quá trình đăng ký")):n==0?($("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("Không gửi được email, vui lòng thử lại sau.")):n==-3?($("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("Email này đã được đăng ký. Vui lòng sử dụng email khác"),$("#txtemail").focus()):n==-4?($("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("Email không hợp lệ"),$("#txtemail").focus()):n==-5?($("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("Vui lòng nhập địa chỉ Email"),$("#txtemail").focus()):n==-1?($("#divcaptcha").css("display","block"),$("#confirmcapcha").css("display","block"),$("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("<p>Bạn đã đăng ký vượt quá số lần quy định, vui lòng nhập mã xác nhận.<\/p>"),$("#txtcaptcha").focus()):n==-2&&($("#frmRegister .error").css("display","block"),$("#frmRegister .error").html("Mã bảo mật không đúng."),$("#txtcaptcha").focus())}})}function CallAjaxPostLogin(n,t,i,r,u){$.ajax({async:u,url:n,data:t,type:"POST",cache:!1,success:function(n){i(n)},error:function(){r()}})}function validatePhoneInput(n){return/^(((09)[0-9][2-9][0-9]{6})|((012)[0-9][2-9][0-9]{6})|((016)[2-9]{2}[0-9]{6}))$/.test(n)?!0:!1}function Failed(n){$("#spanmsg").html("Lỗi: "+n.toString())}function ValidatePassword(){var t=$("#txtpassword").val(),n=$("#spanmsg");return t==""?(n.addClass("error"),n.html("Vui lòng nhập mật khẩu"),!1):t.indexOf(" ")>=0?(n.addClass("error"),n.html("Mật khẩu không được chứa khoảng trắng"),!1):t.length<6||t.length>20?(n.addClass("error"),n.html("Mật khẩu phải có độ dài 6-20 ký tự"),!1):(n.html(""),!0)}function FormatValidateCharBlur(n){var t=$("#"+n+"").val();isNaN(t)?CheckRegisterFormEmail_Login(n):CheckRegisterFormPhone_Login(n)}function CheckRegisterFormEmail_Login(n){var i=$("#"+n+"").val(),t=$("#spanmsg");if(i=="")return t.addClass("error"),t.html("Vui lòng nhập Email hoặc số điện thoại"),$("#txtusername").focus(),!1;if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,!regem.test(i))return t.addClass("error"),t.html("Email không đúng định dạng"),$("#txtusername").focus(),!1;CheckExistEmail(i)}function CheckRegisterFormPhone_Login(n){var t=$("#spanmsg"),i=$("#"+n+"").val();if(i=="")return t.addClass("error"),t.html("Email hoặc Số điện thoại không được để trống"),$("#txtusername").focus(),!1;if(!validatePhoneInput(i))return t.addClass("error"),t.html("Số điện thoại không đúng định dạng"),$("#txtusername").focus(),!1;CheckExistPhone(i)}function CheckExistPhone(n){var t={strMobile:n};CallAjaxPostLogin("/aj/Common/CheckExistMobile/",t,CheckPhoneNumberValidSuccessed2,Failed,!0)}function CheckExistEmail(n){var t={strEmail:n};CallAjaxPostLogin("/aj/Common/CheckExistEmail/",t,CheckEmailValidSuccessed,Failed,!0)}function CheckPhoneNumberValidSuccessed2(n){var t=$("#spanmsg");if(n=="False"){t.addClass("error");t.html("Số điện thoại chưa được đăng ký");return}t.html("")}function CheckEmailValidSuccessed(n){var t=$("#spanmsg");if(n=="False"){t.addClass("error");t.html("Email chưa được đăng ký");return}t.html("")}function ValidateBeforeSubmit(){var t=$("#txtusername").val(),i=$("#txtpassword").val(),n;if(t=="")return FormatValidateCharBlur("txtusername"),!1;if(i=="")return ValidatePassword(),!1;n=$("#form-login");n.ajaxSubmit({success:function(n){var t="",i="";n.toString().indexOf("@")>-1?(t=n.toString().substr(0,n.indexOf("@")),i=n.toString().substr(n.indexOf("@")+1)):t=n;t=="-1"?($("#spanmsg").addClass("error"),$("#spanmsg").html("Nhập email hoặc số điện thoại"),$("#txtusername").focus()):t=="-2"?($("#spanmsg").addClass("error"),$("#spanmsg").html("Vui lòng nhập mật khẩu"),$("#txtpassword").focus()):t=="0"?($("#spanmsg").addClass("error"),$("#spanmsg").html("Thông tin đăng nhập không chính xác")):window.location=i}})}function Validateforgetpass(){var n=$("#popupemailforget").val();if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,n=="")return $("#spforget").html("Vui lòng nhập Email của bạn"),$("#popupemailforget").focus(),!1;if(regem.test(n)){if(!CheckExistEmailForgetPass(n))return $("#spforget").html("Email không tồn tại trong hệ thống"),$("#popupemailforget").focus(),!1}else return $("#spforget").html("Email không đúng định dạng"),$("#popupemailforget").focus(),!1;return!0}function CheckExistEmailForgetPass(n){var t={strEmail:n};return CallAjaxPostLogin("/aj/Common/CheckExistEmail/",t,function(n){if(n=="False")return!1},function(){},!0),!0}function SendLinkToResetPassword(){var t=$("#popupemailforget").val(),n;if(Validateforgetpass())$("#spforget").html(""),n={strEmail:t},CallAjaxPost("/aj/Common/ResetPasswordFromEmail/",n,function(){$("#divwaiting").css("display","block");$("#btnUpdatePassPopup").attr("disabled","disabled")},function(n){$("#divwaiting").css("display","none");n==1?(alert("Vui lòng kiểm tra email của bạn để tạo mật khẩu mới"),$.fancybox.close()):$("#spforget").html("Lỗi gửi email. Vui lòng thử lại sau.")},function(){$("#divwaiting").css("display","none");$("#spforget").html("Lỗi gửi email. Vui lòng thử lại sau.")},!0);else return}function validatePasswordForgetPassword(n,t){var i=$("#"+n+"").val(),r=$("#"+t+"").val();i==""?($("#spanmsgforget").html("Vui lòng nhập mật khẩu"),$("#"+n+"").focus()):i.length<6?($("#spanmsgforget").html("Mật khẩu phải có ít nhất 6 kí tự"),$("#"+n+"").focus()):i.length>20?($("#spanmsgforget").html("Mật khẩu tối đa 20 kí tự"),$("#"+n+"").focus()):r==""?($("#spanmsgforget").html("Vui lòng xác nhận mật khẩu"),$("#"+t+"").focus()):r.length<6?($("#spanmsgforget").html("Mật khẩu phải có ít nhất 6 kí tự"),$("#"+t+"").focus()):r.length>20?($("#spanmsgforget").html("Mật khẩu tối đa 20 kí tự"),$("#"+t+"").focus()):i!=r?$("#spanmsgforget").html("Mật khẩu không giống nhau"):$("#form-pass").submit()}function CheckRegisterFormEmail_Register(n){var t=$("#"+n+"").val();if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,t==""){$("#login-error").css("display","block");$("#login-error").addClass("error");$("#login-error").html("Vui lòng nhập địa chỉ Email");$("#txtemail").focus();return}if(!regem.test(t)){$("#login-error").css("display","block");$("#login-error").addClass("error");$("#login-error").html("Email không đúng định dạng");$("#txtemail").focus();return}CheckExistEmail_Register(t)}function CheckExistEmail_Register(n){var t={strEmail:n};CallAjaxPostLogin("/aj/Common/CheckExistEmail/",t,function(n){(n.toString()=="True"||n.toString()=="ERR")&&($("#login-error").css("display","block"),$("#login-error").html("Email này đã được đăng ký. Vui lòng sử dụng email khác"))},function(){},!0)}function SendLinkToRegister(){var t=$("#txtemail").val(),n;$("#login-error").html("");$("#login-error").css("display","none");n={strEmail:t};CallAjaxPostLogin("/aj/Common/SendEmailRegister/",n,function(n){n==-1?($("#login-error").css("display","block"),$("#login-error").html("Vui lòng kiểm tra email để hoàn tất quá trình đăng ký")):n==1?($("#login-error").css("display","block"),$("#login-error").html("Vui lòng kiểm tra email để hoàn tất quá trình đăng ký")):($("#login-error").css("display","block"),$("#login-error").html("Email này đã được đăng ký. Vui lòng sử dụng email khác"))},function(){alert("Loi")},!0)}function submitsendEmail(){var t=$("#txtemail").val(),n=$("#form-register");n.ajaxSubmit({beforeSubmit:function(){$("#login-error").css("display","block");$("#login-error").html('Đang xử lý, vui lòng đợi... <img border="0" src="Content/images/sites/ajax-loader.gif"/>')},success:function(n){n==1?($("#login-error").css("display","block"),$("#divcaptcha").css("display","none"),$("#divconfirmcaptcha").css("display","none"),$("#login-error").html("Vui lòng kiểm tra email để hoàn tất quá trình đăng ký")):n==0?($("#login-error").css("display","block"),$("#login-error").html("Không gửi được email, vui lòng thử lại sau.")):n==-3?($("#login-error").css("display","block"),$("#login-error").html("Email này đã được đăng ký. Vui lòng sử dụng email khác"),$("#txtemail").focus()):n==-4?($("#login-error").css("display","block"),$("#login-error").html("Email không hợp lệ"),$("#txtemail").focus()):n==-5?($("#login-error").css("display","block"),$("#login-error").html("Vui lòng nhập địa chỉ Email"),$("#txtemail").focus()):n==-1?($("#divcaptcha").css("display","block"),$("#divconfirmcaptcha").css("display","block"),$("#login-error").css("display","block"),$("#login-error").html("<p>Bạn đã đăng ký vượt quá số lần quy định, vui lòng nhập mã xác nhận.<ul><ol>Bạn chưa nhập mã bảo mật.<\/ol><\/ul><\/p>"),$("#txtcaptcha").focus()):n==-2&&($("#login-error").css("display","block"),$("#login-error").html("Mã bảo mật không đúng."),$("#txtcaptcha").focus())}})}function ValidateRegisterName(){var n=$("#txtname").val();n=n.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"");n==""?($("#login-error").css("display","block"),$("#login-error").html("Vui lòng nhập tên của bạn"),$("#txtname").focus()):($("#login-error").html(""),$("#login-error").css("display","none"),$("#txtname").val(n.trim()),$("#spcheckname").html('<img border="0" alt="Tên OK" src="/Content/images/sites/check-icon.png"/>'))}function ValidateRegisterPassword(){var n=$("#txtpassword").val().trim();n==""?($("#login-error").css("display","block"),$("#login-error").html("Vui lòng nhập mật khẩu của bạn"),$("#txtpassword").focus()):n.length<6?($("#login-error").css("display","block"),$("#login-error").html("Mật khẩu phải có ít nhất 6 kí tự"),$("#txtpassword").focus()):n.length>20?($("#login-error").css("display","block"),$("#login-error").html("Mật khẩu tối đa 20 kí tự"),$("#txtpassword").focus()):($("#login-error").html(""),$("#login-error").css("display","none"),$("#spcheckpass").html('<img border="0" alt="Tên OK" src="/Content/images/sites/check-icon.png"/>'))}function get_gravatar(n,t){var u=window.location.host,i="",r,t;return n!=""?(r=function(n){function a(n,t){return n<<t|n>>>32-t}function o(n,t){var f,e,r,u,i;return(r=n&2147483648,u=t&2147483648,f=n&1073741824,e=t&1073741824,i=(n&1073741823)+(t&1073741823),f&e)?i^2147483648^r^u:f|e?i&1073741824?i^3221225472^r^u:i^1073741824^r^u:i^r^u}function yt(n,t,i){return n&t|~n&i}function pt(n,t,i){return n&i|t&~i}function wt(n,t,i){return n^t^i}function bt(n,t,i){return t^(n|~i)}function s(n,t,i,r,u,f,e){return n=o(n,o(o(yt(t,i,r),u),e)),o(a(n,f),t)}function h(n,t,i,r,u,f,e){return n=o(n,o(o(pt(t,i,r),u),e)),o(a(n,f),t)}function c(n,t,i,r,u,f,e){return n=o(n,o(o(wt(t,i,r),u),e)),o(a(n,f),t)}function l(n,t,i,r,u,f,e){return n=o(n,o(o(bt(t,i,r),u),e)),o(a(n,f),t)}function kt(n){for(var r,u=n.length,o=u+8,s=(o-o%64)/64,e=(s+1)*16,i=Array(e-1),f=0,t=0;t<u;)r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|n.charCodeAt(t)<<f,t++;return r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|128<<f,i[e-2]=u<<3,i[e-1]=u>>>29,i}function v(n){for(var i="",r="",u,t=0;t<=3;t++)u=n>>>t*8&255,r="0"+u.toString(16),i=i+r.substr(r.length-2,2);return i}function dt(n){var i,r,t;for(n=n.replace(/rn/g,"n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i}var e=Array(),f,ht,ct,lt,at,t,i,r,u,y=7,p=12,w=17,b=22,k=5,d=9,g=14,nt=20,tt=4,it=11,rt=16,ut=23,ft=6,et=10,ot=15,st=21,vt;for(n=dt(n),e=kt(n),t=1732584193,i=4023233417,r=2562383102,u=271733878,f=0;f<e.length;f+=16)ht=t,ct=i,lt=r,at=u,t=s(t,i,r,u,e[f+0],y,3614090360),u=s(u,t,i,r,e[f+1],p,3905402710),r=s(r,u,t,i,e[f+2],w,606105819),i=s(i,r,u,t,e[f+3],b,3250441966),t=s(t,i,r,u,e[f+4],y,4118548399),u=s(u,t,i,r,e[f+5],p,1200080426),r=s(r,u,t,i,e[f+6],w,2821735955),i=s(i,r,u,t,e[f+7],b,4249261313),t=s(t,i,r,u,e[f+8],y,1770035416),u=s(u,t,i,r,e[f+9],p,2336552879),r=s(r,u,t,i,e[f+10],w,4294925233),i=s(i,r,u,t,e[f+11],b,2304563134),t=s(t,i,r,u,e[f+12],y,1804603682),u=s(u,t,i,r,e[f+13],p,4254626195),r=s(r,u,t,i,e[f+14],w,2792965006),i=s(i,r,u,t,e[f+15],b,1236535329),t=h(t,i,r,u,e[f+1],k,4129170786),u=h(u,t,i,r,e[f+6],d,3225465664),r=h(r,u,t,i,e[f+11],g,643717713),i=h(i,r,u,t,e[f+0],nt,3921069994),t=h(t,i,r,u,e[f+5],k,3593408605),u=h(u,t,i,r,e[f+10],d,38016083),r=h(r,u,t,i,e[f+15],g,3634488961),i=h(i,r,u,t,e[f+4],nt,3889429448),t=h(t,i,r,u,e[f+9],k,568446438),u=h(u,t,i,r,e[f+14],d,3275163606),r=h(r,u,t,i,e[f+3],g,4107603335),i=h(i,r,u,t,e[f+8],nt,1163531501),t=h(t,i,r,u,e[f+13],k,2850285829),u=h(u,t,i,r,e[f+2],d,4243563512),r=h(r,u,t,i,e[f+7],g,1735328473),i=h(i,r,u,t,e[f+12],nt,2368359562),t=c(t,i,r,u,e[f+5],tt,4294588738),u=c(u,t,i,r,e[f+8],it,2272392833),r=c(r,u,t,i,e[f+11],rt,1839030562),i=c(i,r,u,t,e[f+14],ut,4259657740),t=c(t,i,r,u,e[f+1],tt,2763975236),u=c(u,t,i,r,e[f+4],it,1272893353),r=c(r,u,t,i,e[f+7],rt,4139469664),i=c(i,r,u,t,e[f+10],ut,3200236656),t=c(t,i,r,u,e[f+13],tt,681279174),u=c(u,t,i,r,e[f+0],it,3936430074),r=c(r,u,t,i,e[f+3],rt,3572445317),i=c(i,r,u,t,e[f+6],ut,76029189),t=c(t,i,r,u,e[f+9],tt,3654602809),u=c(u,t,i,r,e[f+12],it,3873151461),r=c(r,u,t,i,e[f+15],rt,530742520),i=c(i,r,u,t,e[f+2],ut,3299628645),t=l(t,i,r,u,e[f+0],ft,4096336452),u=l(u,t,i,r,e[f+7],et,1126891415),r=l(r,u,t,i,e[f+14],ot,2878612391),i=l(i,r,u,t,e[f+5],st,4237533241),t=l(t,i,r,u,e[f+12],ft,1700485571),u=l(u,t,i,r,e[f+3],et,2399980690),r=l(r,u,t,i,e[f+10],ot,4293915773),i=l(i,r,u,t,e[f+1],st,2240044497),t=l(t,i,r,u,e[f+8],ft,1873313359),u=l(u,t,i,r,e[f+15],et,4264355552),r=l(r,u,t,i,e[f+6],ot,2734768916),i=l(i,r,u,t,e[f+13],st,1309151649),t=l(t,i,r,u,e[f+4],ft,4149444226),u=l(u,t,i,r,e[f+11],et,3174756917),r=l(r,u,t,i,e[f+2],ot,718787259),i=l(i,r,u,t,e[f+9],st,3951481745),t=o(t,ht),i=o(i,ct),r=o(r,lt),u=o(u,at);return vt=v(t)+v(i)+v(r)+v(u),vt.toLowerCase()},t=t||80,r(n)!=""&&(i="http://www.gravatar.com/avatar.php?gravatar_id="+r(n)+"&default="+encodeURI("http://www.thegioididong.com/Content/images/sites/default_avatar_large.png")+"&size=90")):i="http://www.tgdd.com/Content/images/sites/default_avatar_large.png",i}function SetLinkRegister(){var n=getQuerystring("returnurl"),t,i;n!=""?window.location="/dang-ky?returnurl="+n:(t=window.location.href,i={content:t},CallAjaxPostLogin("/aj/Common/EncryptQeryString/",i,function(n){n!=""&&(window.location="/dang-ky?returnurl="+n)},function(){},!0))}function SetLinkLogin(){var n=getQuerystring("returnurl"),t,i;n!=""?window.location="/dang-nhap?returnurl="+n:(t=window.location.href,i={content:t},CallAjaxPostLogin("/aj/Common/EncryptQeryString/",i,function(n){n!=""&&(window.location="/dang-nhap?returnurl="+n)},function(){},!0))}function ChangeAvatar(){var n=$("#upload-image").val(),t={strFile:n};CallAjaxPost("/aj/Common/UploadAvatar/",t,BeforeSendAjax,function(n){var t=$.parseJSON(n.currentTarget.response),r,i,u;t.message=="upload sucessfully"&&(r=document.createElement("li"),i=document.createElement("img"),i.setAttribute("id","img-"+t.ImageId),i.setAttribute("name",t.ImageName),u=document.getElementById("thumbnail"),i.src=t.imageUrl,r.appendChild(i),u.appendChild(r),setInterval(this,5));t.message=="maximum size upload"&&alert("Dung lượng file upload quá lớn. Tối đa 1MB.");t.message=="maximum file upload"&&alert("Bạn chỉ được phép thêm tối đa 1 hình.");t.message=="invalid file upload"&&alert("Vui lòng chọn hình ảnh đúng định dạng")},ErrorAjax,!0)}function CreateCustomer(){var n=$("#form-register-final");n.ajaxSubmit({beforeSubmit:function(){$("#login-error").css("display","block");$("#login-error").html('Đang xử lý, vui lòng đợi trong giây lát... <img border="0" alt="Loading" src="/Content/images/sites/ajax-loader.gif"/>')},success:function(n){if(n=="-3")$("#login-error").css("display","block"),$("#login-error").html("Vui lòng nhập họ tên của bạn"),$("#txtname").focus();else if(n=="-2")$("#login-error").css("display","block"),$("#login-error").html("Vui lòng nhập mật khẩu"),$("#txtpassword").focus();else if(n=="0")$("#login-error").css("display","block"),$("#login-error").html("Lỗi đăng ký thông tin thành viên, vui lòng thử lại sau.");else{var i="",t=n;i=t!=""&&t!=undefined?t.indexOf("http://")>-1?t:"http://"+t:"/";window.location=i}}})}function getQuerystring(n,t){t==null&&(t="");n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+n+"=([^&#]*)"),i=r.exec(window.location.href);return i==null?t:i[1]}function Checkdataonblur(n){var t=$("#"+n+"").val();isNaN(t)?CheckEmail_LoginMain(n):CheckPhone_LoginMain(n)}function CheckEmail_LoginMain(n){var t=$("#"+n+"").val(),i;if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,i=$("#login-error"),t==""||t==undefined)return $("#login-error").css("display","block"),i.html("Email hoặc Số điện thoại không được để trống"),$("#txtusername").focus(),!1;if(!regem.test(t))return $("#login-error").css("display","block"),i.html("Email không đúng định dạng"),$("#txtusername").focus(),!1;CheckExistEmailMain(t)}function CheckPhone_LoginMain(n){var i=$("#login-error"),t=$("#"+n+"").val();if(t==""||t==undefined)return $("#login-error").css("display","block"),i.html("Email hoặc Số điện thoại không được để trống"),$("#txtusername").focus(),!1;if(!validatePhoneInput(t))return $("#login-error").css("display","block"),i.html("Số điện thoại không đúng định dạng"),$("#txtusername").focus(),!1;i.html("");$("#login-error").css("display","none");CheckExistPhoneMain(t)}function CheckExistPhoneMain(n){var t={strMobile:n};return CallAjaxPostLogin("/aj/Common/CheckExistMobile/",t,function(n){if(n=="True")return!0},Failed,!0),!1}function CheckExistEmailMain(n){var t={strEmail:n};return CallAjaxPostLogin("/aj/Common/CheckExistEmail/",t,function(n){if(n=="True")return!0},Failed,!0),!1}function ValidatePassMain(n){var t=$("#"+n+"").val(),i=$("#login-error");return t==""||t==undefined?($("#login-error").css("display","block"),i.html("Vui lòng nhập mật khẩu"),$("#txtpassword").focus(),!1):t.indexOf(" ")>=0?($("#login-error").css("display","block"),i.html("Mật khẩu không được chứa khoảng trắng"),!1):t.length<6||t.length>20?($("#login-error").css("display","block"),i.html("Mật khẩu phải có độ dài 6-20 ký tự"),!1):(i.html(""),$("#login-error").css("display","none"),!0)}function ValidateDataBeforeLogin(n,t){var i=$("#"+n+"").val(),r=$("#"+t+"").val(),u;if(i==""||i==undefined)return Checkdataonblur(n),!1;if(r==""||r==undefined)return ValidatePassMain(t),!1;u=$("#form-login-main");u.ajaxSubmit({beforeSubmit:function(){$("#login-error").css("display","block");$("#login-error").html('Đang xử lý, vui lòng đợi... <img border="0" alt="Loading" src="Content/images/sites/ajax-loader.gif"/>')},success:function(n){var i="",t="";n.indexOf("@")>-1?(i=n.substr(0,n.indexOf("@")),t=n.substr(n.indexOf("@")+1)):i=n;i=="0"?($("#login-error").css("display","block"),$("#login-error").html("Thông tin đăng nhập không chính xác.")):i=="-1"?($("#divcaptcha").css("display","block"),$("#divconfirmcaptcha").css("display","block"),$("#login-error").css("display","block"),$("#login-error").html("<p>Bạn đã đăng nhập vượt quá số lần quy định, vui lòng nhập mã xác nhận.<ul><ol>Bạn chưa nhập mã bảo mật.<\/ol><\/ul><\/p>"),$("#txtcaptcha").focus()):i=="-2"?($("#login-error").css("display","block"),$("#login-error").html("Mã bảo mật không đúng."),$("#txtcaptcha").focus()):((t==""||t.indexOf("dang-nhap")>-1||t.indexOf("dang-ky")>-1)&&(t="/"),window.location=t)}})}function SetLinkLogin(){var n=getQuerystring("returnurl"),t=window.location.href;window.location=n!=""?"/dang-nhap?returnurl="+n:"/dang-nhap"}var FLAG_CHECK_MAIL,FLAG_CHECK_PHONE,FLAG_LOGIN_SITE,FLAG_SUBMIT_REGIST;ValidateEmailInputValue=function(n){if(n=="")return $("#frmLogin .error").text("Vui lòng nhập Email hoặc số điện thoại"),$("#txtusername").focus(),!1;if(regem=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,!regem.test(n))return $("#frmLogin .error").text("Email không đúng định dạng"),$("#txtusername").focus(),!1;CheckWithEmail(n,"frmLogin")};ValidatePhoneInputValue=function(n){if(n=="")return $("#frmLogin .error").text("Email hoặc Số điện thoại không được để trống"),$("#txtusername").focus(),!1;if(!validatePhoneInput(n))return $("#frmLogin .error").text("Số điện thoại không đúng định dạng"),$("#txtusername").focus(),!1;CheckWithPhone(n,"frmLogin")};FLAG_CHECK_MAIL=!0;CheckWithEmail=function(n,t){var i={strEmail:n};FLAG_CHECK_MAIL&&(FLAG_CHECK_MAIL=!1,CallAjaxPostLogin("/aj/Common/CheckExistEmail/",i,function(n){if(n=="False"&&t=="frmLogin")return $("#"+t+" .error").text("Email chưa được đăng ký"),$("#txtemail").focus(),!1;if(n=="True"&&t=="frmRegister")return $("#"+t+" .error").text("Email đã được đăng ký"),$("#txtemail").focus(),!1;$("#"+t+" .error").text("")},onFailed,!0),FLAG_CHECK_MAIL=!0)};FLAG_CHECK_PHONE=!0;CheckWithPhone=function(n,t){var i={strMobile:n};FLAG_CHECK_PHONE&&(FLAG_CHECK_PHONE=!1,CallAjaxPostLogin("/aj/Common/CheckExistMobile/",i,function(n){if(n=="False"&&t=="frmLogin")return $("#"+t+" .error").text("Số điện thoại chưa được đăng ký"),$("#txtemail").focus(),!1;if(n=="True"&&t=="frmRegister")return $("#"+t+" .error").text("Số điện thoại đã được đăng ký"),$("#txtemail").focus(),!1;$("#"+t+" .error").text("")},onFailed,!0),FLAG_CHECK_PHONE=!0)};onFailed=function(){alert("Thao tác thực hiện không thành công.");return};OnSuccessValidate=function(n){return n=="False"?0:1};FLAG_LOGIN_SITE=!0;FLAG_SUBMIT_REGIST=!0;$(document).ready(function(){var r=$("#hfCusid").val(),n,i,t;(r!=undefined&&(n=getCookie("CK_CHECK_PROVINCE_OF_USER"),n!=""&&(n!=$("#cityID").val()&&$("#divshowlocation").css("display","block"),$("#divshowlocation").delay(2e3).fadeOut())),i=document.getElementById("upload-img"),t=document.getElementById("upload-image"),i!=null&&t!=null)&&t.addEventListener("change",function(){$("#form-avatar").submit()},!1)});
/*
//# sourceMappingURL=login.min.js.map
*/